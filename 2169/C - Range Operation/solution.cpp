#include<bits/stdc++.h>using namespace std;typedef long long ll;int main(){    ll t;    cin>>t;    while(t--){        ll n;        cin>>n;        vector<ll> a(n);        ll sum=0;        for(ll i=0;i<n;i++) {            cin>>a[i];            sum+=a[i];        }        vector<ll> b(n,0);        for(ll i=0;i<n;i++){            b[i]=2*(i+1)-a[i];        }        ll extra=0;        ll ans=0;        for(int i=0;i<n;i++){            extra=max(0LL,extra+b[i]);            ans=max(ans,extra);        }        cout<<sum+ans<<endl;    }}